(function(n){n.fn.rating=function(t){function i(n,t){var i=parseInt(n.val());i||(i=0);t.find("a").removeAttr("class");t.find("a:lt("+i+")").attr("class","full")}var r=n.extend({rateEnd:function(){}},t);return this.each(function(){var t=n(this),f=parseInt(t.attr("class").match(/rating\d+/)[0].replace("rating","")),u=n('<ul class="rating"><\/ul>').insertAfter(t).width(f*20+"px"),e;if(f>0)for(k=0;k<f;k++)u.append('<li><a href="javascript:void(0);" title="'+(k+1)+'">'+(k+1)+"<\/a><\/li>");t.prop("readonly")?(e=parseInt(t.val()),e||(e=0),u.find("a").attr("title",e+" / "+f)):u.find("a").each(function(f,e){var e=n(e);e.hover(function(){u.find("a").removeAttr("class");u.find("a:lt("+(f+1)+")").attr("class","hover")},function(){i(t,u)});e.click(function(){t.val(f+1);i(t,u);r.rateEnd(f+1)})});i(t,u);t.hide()}),this}})(jQuery)